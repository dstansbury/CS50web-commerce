{% extends "auctions/layout.html" %}


{% block body %}
    <h2>{{ listing.title }} </h2>
    <p> Add to watch list </p>
    <div>
        <img src="{{ listing.imageURL }}" alt="Image of {{ listing.title }}" style="max-width:500px">
    </div>
    <div>
        <p><strong>Current high bid</strong>: {{ listing.currentPrice }} </p>
    </div>
<!-- hides the ability to bid if the user is not logged in -->
    {% if user.is_authenticated %}
    <div>
        <p> Bid form</p>
    </div>
    {% endif %}
    <br>
    <div>
        <h3>Details</h3>
        <p>{{ listing.description }}</p>
        <p><strong>Listed by:</strong>  {{ listing.listedBy }} </p>
        <p><strong>Listed at:</strong> {{ listing.listedTime }} </p>
        <p><strong>Category:</strong> {{ listing.category }} </p>
    </div>
    <div>
        <h3>Bid History</h3>
        <table class = "table table-hover table-bordered">
            <thead class="thead-dark">
                <tr>
                    <th>User</th>
                    <th>Bid</th>
                    <th>Time</th>
                </tr>
            </thead>
            {% for bid in bids %}
                <tr>
                    <td>{{ bid.userID }} </td>
                    <td>{{ bid.bidValue }}</td>
                    <td>{{ bid.bidTime }}</td>
                </tr>
            {% endfor %}
        </table>
    </div>
    <div>
        <h3>Comments</h3>
        <table class = "table table-hover table-bordered">
            <thead class="thead-dark">
                <tr>
                    <th>User</th>
                    <th>Comment</th>
                    <th>Time</th>
                </tr>
            </thead>
            {% for comment in comments %}
                <tr>
                    <td>{{ comment.userID }} </td>
                    <td>{{ comment.comment }}</td>
                    <td>{{ comment.commentTime }}</td>
                </tr>
            {% endfor %}
        </table>
    </div>
    
{% endblock %}